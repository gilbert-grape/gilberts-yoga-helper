{# Match Group Partial - collapsible group of matches for a search term #}
<div class="bg-white rounded-lg shadow mb-4">
    {# Group Header - clickable to expand/collapse #}
    <h2>
        <button
            type="button"
            class="flex items-center justify-between w-full p-4 font-medium text-left text-gray-900 border-b border-gray-200 hover:bg-gray-50 focus:ring-4 focus:ring-gray-200"
            data-accordion-target="#group-content-{{ group.term.id }}"
            aria-expanded="true"
            aria-controls="group-content-{{ group.term.id }}"
        >
            <span class="flex items-center gap-3">
                {# Search Term Name #}
                <span class="text-lg font-semibold">{{ group.term.term }}</span>

                {# Match Type Badge #}
                <span class="text-xs px-2 py-0.5 rounded {% if group.term.match_type == 'exact' %}bg-blue-100 text-blue-800{% else %}bg-purple-100 text-purple-800{% endif %}">
                    {{ group.term.match_type }}
                </span>

                {# Count Badges #}
                <span class="text-sm text-gray-500">
                    {{ group.total_count }} Treffer
                </span>
                {% if group.new_count > 0 %}
                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-0.5 rounded">
                    {{ group.new_count }} neue
                </span>
                {% endif %}
            </span>

            {# Chevron Icon #}
            <svg data-accordion-icon class="w-6 h-6 shrink-0 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
        </button>
    </h2>

    {# Group Content - matches grid or empty state #}
    <div id="group-content-{{ group.term.id }}" class="p-4">
        {% if group.matches and group.matches|length > 0 %}
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                {% for match in group.matches %}
                    {% include "_partials/_match_card.html" %}
                {% endfor %}
            </div>
        {% else %}
            {# Empty State for this group #}
            <div class="text-center py-6 text-gray-500">
                <svg class="mx-auto h-8 w-8 text-gray-400 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                </svg>
                <p>Keine Treffer f√ºr "{{ group.term.term }}"</p>
            </div>
        {% endif %}
    </div>
</div>
